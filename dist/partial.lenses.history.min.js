!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("infestines"),0,require("partial.lenses")):"function"==typeof define&&define.amd?define(["exports","infestines","partial.lenses.validation","partial.lenses"],r):r((n=n||self).H={},n.I,0,n.L)}(this,function(n,f,r,t){function c(n){for(var r=0;h<<r<n;)r+=m;return r}function a(n,r){n+=r.l;for(var t=c(r.u),e=r.r;0!==t;)e=e[n>>t&y],t-=m;return e[n&y]}function l(n,r){var t=r.u,e=c(t),u=r.r;return M(r.l,t+1,t>>e<h?w(e,t,n,u):[u,w(e,t,n,"")])}function s(n,r,t){if(r<=n)return q;if(0===n&&g(t)===r)return t;for(var e=t.l+n,u=e+r-n,i=t.r,o=c(t.u);0!==o&&(e>>o&y)==(u-1>>o&y);){var f=e&y<<o,i=i[e>>o&y];e-=f,u-=f,o-=m}return t.u!==u&&(i=E(o,u-1,i)),t.l!==e&&(i=D(o,e,i)),M(e,u,i)}function e(n,r){var t,e,u=r.v,i=r.i,o=r.c;return o.e&&f.acyclicEqualsU(a(i,u),n)?r:(r=r.t,t=Date.now(),d((i=i+(o.p<=t-a(i,r)))-(e=Math.max(0,i-o.m)),l(t,s(e,i,r)),l(n,s(e,i,u)),o))}function u(n,r){var t,e,u=r.v,i=r.i,o=r.c;return o.e&&f.acyclicEqualsU(a(i,u),n)?r:(r=r.t,t=Date.now(),d(i-(e=Math.max(0,i-o.m)),l(t,s(e,i,r)),l(n,s(e,i,u)),o))}function i(n){return M(0,1,[n])}function o(n,r){return s(n,g(r),r)}function v(n,r){return s(0,n,r)}function d(n,r,t,e){return{i:n,t:r,v:t,c:e}}function p(n,r){return d(Math.max(0,Math.min(n,b(r))),r.t,r.v,r.c)}function x(n){return n}var m=4,h=1<<m,y=h-1,M=function(n,r,t){return{l:n,u:r,r:t}},q=M(0,0,f.array0),g=function(n){return n.u-n.l},w=(0,f.id)(function(n,r,t,e){for(var u=r>>n&y,n=0!==n?w(n-m,r,t,e[u]||""):t,i=[],o=0,f=e.length;o<f;++o)i[o]=e[o];return i[u]=n,i}),D=(0,f.id)(function(n,r,t){for(var e=r>>n&y,n=0!==n?D(n-m,r,t[e]):t[e],u=[],i=0;i<e;++i)u[i]=null;u[e]=n;for(var o=1+e,f=t.length;o<f;++o)u[o]=t[o];return u}),E=(0,f.id)(function(n,r,t){for(var e=r>>n&y,n=0!==n?E(n-m,r,t[e]):t[e],u=[],i=0;i<e;++i)u[i]=t[i];return u[e]=n,u}),I=t.lens(function(n){return n.i},p),b=function(n){return g(n.v)-1},j=x(f.curryN(2,function(n){var r={p:(n=n||0).replacePeriod||0,e:!n.pushEquals,m:Math.max(1,n.maxCount||-1>>>1)-1};return function(n){return d(0,i(Date.now()),i(n),r)}})),F=x(t.lens(function(n){return a(n.i,n.v)},e)),P=x(t.lens(function(n){return a(n.i,n.v)},u)),U=x(I),_=x(function(n){return d(0,o(n.i,n.t),o(n.i,n.v),n.c)}),t=x(t.lens(function(n){return b(n)-n.i},function(n,r){return p(b(r)-n,r)})),C=x(function(n){return d(n.i,v(n.i+1,n.t),v(n.i+1,n.v),n.c)}),I=x(I),H=x(b);n.count=x(function(n){return g(n.v)}),n.index=I,n.indexMax=H,n.init=j,n.present=F,n.presentMut=P,n.redoForget=C,n.redoIndex=t,n.undoForget=_,n.undoIndex=U,Object.defineProperty(n,"__esModule",{value:!0})});
